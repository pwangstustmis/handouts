<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>資料庫存取(Entity Framework)</title>
    <link href="../css/bootstrap.min.css" rel="stylesheet"/>
    <link href="../css/all.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="css/style.css" />
  </head>

  <body>

    <!-- Side-Nav -->
    <div class="side-navbar active-nav d-flex justify-content-between flex-wrap flex-column" id="sidebar">
      <ul class="nav flex-column text-white w-100">
        <li class="nav-item" style="background-color: #fff;padding-left:10px;padding-top:10px;border-bottom: rgb(255, 115, 0) 2px solid;font-size: 16pt;">
          <p style="color:rgb(248, 138, 11);font-weight: 700;">網頁程式設計<br/>ASP.Net Core</p>
        </li>
        <li class="nav-item">
          <div class="nav-link" href="#topic1" class="nav-item" data-bs-toggle="collapse" aria-expanded="false" aria-controls="topic1">
            <span class="mx-2">課程簡介</span>
            <i class="fas fa-angle-right"></i>
          </div>
          <div class="collapse" id="topic1">
            <ul>
              <li class="menuitem"><a class="nav-link" href="index.html">網頁應用架構</a></li>
            </ul>
            <ul>
              <li class="menuitem"><a class="nav-link" href="intro-html.html">HTML</a></li>
            </ul>
            <ul>
              <li class="menuitem"><a class="nav-link" href="intro-css.html">CSS</a></li>
            </ul>
            <ul>
              <li class="menuitem"><a class="nav-link" href="intro-javascript.html">JavaScript</a></li>
            </ul>
          </div>
        </li>
        <li class="nav-item">
          <div class="nav-link" href="#topic2" class="nav-item" data-bs-toggle="collapse" aria-expanded="false" aria-controls="topic2">
            <span class="mx-2">.NET Core-MVC</span>
            <i class="fas fa-angle-right"></i>
          </div>
          <div class="collapse" id="topic2">
            <ul>
              <li class="menuitem"><a class="nav-link" href="dnet-1.html">第一個MVC專案</a></li>
            </ul>
            <ul>
              <li class="menuitem"><a class="nav-link" href="dnet-2.html">資料傳遞-控制器到檢視</a></li>
            </ul>
            <ul>
              <li class="menuitem"><a class="nav-link" href="dnet-3.html">標籤協助(TagHelper)</a></li>
            </ul>
            <ul>
            <ul>
              <li class="menuitem"><a class="nav-link" href="dnet-5.html">資料庫存取(Entity Framework)</a></li>
            </ul>
            <ul>
              <li class="menuitem"><a class="nav-link" href="dnet-4.html">動作選擇器(Action Selector)</a></li>
            </ul>
            <ul>
              <li class="menuitem"><a class="nav-link" href="intro-html.html">控制器(COntroller)</a></li>
            </ul>
            <ul>
              <li class="menuitem"><a class="nav-link" href="intro-css.html">檢視(View)</a></li>
            </ul>
            <ul>
              <li class="menuitem"><a class="nav-link" href="intro-javascript.html">資料模型</a></li>
            </ul>
          </div>              
        </li>      
    </div>


    <!-- Main Wrapper -->
    <div class="p-2 my-container active-cont">
      <!-- Breadcrumb -->
      <div class="bg-light px-5" aria-label="breadcrumb" style="height:40px;position:fixed;width:100%;top:0;">
        <a class="btn border-0" id="menu-btn" style="position:fixed"><i class="fas fa-bars"></i></a>
        <ol class="breadcrumb">
          <li class="breadcrumb-item">.NET Core-MVC</li>
          <li class="breadcrumb-item">資料庫存取(Entity Framework)</li>
        </ol>
      </div>
      <!--End Top Nav -->

      <!-- main page -->
      <div style="margin-top:50px;">
        <div class="px-3">
            <h3 class="text-dark">Entity Framework安裝</h3>
            <p>
                Entity Framework(又名ADO.NET Entity Framework)是微軟以ADO.NET為基礎所發展出來的物件關聯對應(O/R Mapping)的解決方案，使用者不直接與資料庫互動，而是藉由Entity Framework物件與資料庫進行互動，本單元先介紹Database First方式(在資料庫伺服器中已經有資料庫存在)，請開啟 <code style="color:#f00">工具-NuGet套件管理員-管理方案NuGet套件</code>，點選瀏覽並安裝下列三項套件：
            </p>
            <ul>
                <li>Microsoft.EntityFrameworkCore.SqlServer</li>
                <li>Microsoft.EntityFrameworkCore.Design</li>
                <li>Microsoft.EntityFrameworkCore.Tools</li>
            </ul>
            <p>
                接下來請選擇 <code style="color:#f00">工具-NuGet套件管理員-套件管理器主控台</code>，並輸入 <code style="color:#f00">Scaffold-DbContext -Connection "Server=(localdb)\mssqllocaldb; Database=資料庫名稱; Trusted_Connection=True; MultipleActiveResultSets=true;" -Provider Microsoft.EntityFrameworkCore.SqlServer -OutputDir "Models" -ContextDir "Data" -Context "資料庫名稱Context"</code>。
            </p>
            <p>
                執行完畢後，會在Models資料夾建立對應本地端SQL伺服器資料庫中資料表資料模型，並新增Data資料夾裡面包含資料存取時資料物件定義。
            </p>
        </div>
        <div class="px-3">
            <h3 class="text-dark">設定連接字串</h3>
            <p>
                
                開啟appsettings.json並在大括符與"Logging"之前加入
                Entity Framework(又名ADO.NET Entity Framework)是微軟以ADO.NET為基礎所發展出來的物件關聯對應(O/R Mapping)的解決方案，使用者不直接與資料庫互動，而是藉由Entity Framework物件與資料庫進行互動，本單元先介紹Database First方式(在資料庫伺服器中已經有資料庫存在)，請開啟 <code style="color:#f00">工具-NuGet套件管理員-管理方案NuGet套件</code>，點選瀏覽並安裝下列三項套件：
            </p>
            <ul>
                <li>開啟Data資料夾中 資料庫名稱Context.cs檔並複製optionsBuilder.UseSqlServer中內容(例如 "Server=(localdb)\\mssqllocaldb; Database=Student; Trusted_Connection=True; MultipleActiveResultSets=true;"</li>
                <li>開啟appsettings.json並在大括符與"Logging"之前加入
<pre style="color:#f00">
"ConnectionStrings":{
    "資料庫連接字串名稱":"optionsBuilder.UseSqlServer中內容"
}
</pre>
                </li>
                <li>開啟Startup.cs在 services.AddControllersWithViews(); 之後加入
<pre style="color:#f00">
services.AddDbContext<資料庫名稱Context>(options =>
    options.UseSqlServer(Configuration.GetConnectionString("資料庫連接字串名稱")));
</pre>
                請注意Startup.cs必須加入 using 專案名稱.Data; 及 using using Microsoft.EntityFrameworkCore;
                </li>
            </ul>
        </div>
        <div class="px-3">
            <h3 class="text-dark">設定連接字串</h3>
            <p>
                
                開啟appsettings.json並在大括符與"Logging"之前加入
                Entity Framework(又名ADO.NET Entity Framework)是微軟以ADO.NET為基礎所發展出來的物件關聯對應(O/R Mapping)的解決方案，使用者不直接與資料庫互動，而是藉由Entity Framework物件與資料庫進行互動，本單元先介紹Database First方式(在資料庫伺服器中已經有資料庫存在)，請開啟 <code style="color:#f00">工具-NuGet套件管理員-管理方案NuGet套件</code>，點選瀏覽並安裝下列三項套件：
            </p>
            <ul>
                <li>開啟Data資料夾中 資料庫名稱Context.cs檔並複製optionsBuilder.UseSqlServer中內容(例如 "Server=(localdb)\\mssqllocaldb; Database=Student; Trusted_Connection=True; MultipleActiveResultSets=true;"</li>
                <li>開啟appsettings.json並在大括符與"Logging"之前加入
<pre style="color:#f00">
"ConnectionStrings":{
    "資料庫連接字串名稱":"optionsBuilder.UseSqlServer中內容"
}
</pre>
                </li>
                <li>開啟Startup.cs在 services.AddControllersWithViews(); 之後加入
<pre style="color:#f00">
services.AddDbContext<資料庫名稱Context>(options =>
    options.UseSqlServer(Configuration.GetConnectionString("資料庫連接字串名稱")));
</pre>
                請注意Startup.cs必須加入 using 專案名稱.Data; 及 using using Microsoft.EntityFrameworkCore;
                </li>
            </ul>
        </div>

        
      </div>
    </div>

    <!-- bootstrap js -->
    <script src="../js/popper.min.js"></script>
    <script src="../js/bootstrap.bundle.min.js"></script>  
    
    <!-- custom js -->
    <script>
      var menu_btn = document.querySelector("#menu-btn");
      var sidebar = document.querySelector("#sidebar");
      var container = document.querySelector(".my-container");
      menu_btn.addEventListener("click", () => {
        sidebar.classList.toggle("active-nav");
        container.classList.toggle("active-cont");
      });
    </script>
  </body>
</html>
